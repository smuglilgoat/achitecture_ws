from xml.etree.ElementTree import Element, SubElement, tostring, ElementTree
import xml.dom.minidom

def create_gpx(interpolated_points, filename="output.gpx"):
    # Create the root element
    gpx = Element('gpx', version="1.1", creator="GPX Python Script", xmlns="http://www.topografix.com/GPX/1/1")
    
    # Create the track element
    trk = SubElement(gpx, 'trk')
    name = SubElement(trk, 'name')
    name.text = "Interpolated Track"

    # Create the track segment element
    trkseg = SubElement(trk, 'trkseg')

    # Add points to the track segment
    for lat, lon in interpolated_points:
        trkpt = SubElement(trkseg, 'trkpt', attrib={"lat": f"{lat}", "lon": f"{lon}"})
        ele = SubElement(trkpt, 'ele')
        ele.text = "0.0"  # Elevation set to 0, you can modify if needed
    
    # Convert to a string
    rough_string = tostring(gpx, 'utf-8')
    
    # Pretty print the XML
    reparsed = xml.dom.minidom.parseString(rough_string)
    pretty_gpx = reparsed.toprettyxml(indent="  ")
    
    # Write to a file
    with open(filename, "w") as f:
        f.write(pretty_gpx)
    print(f"GPX file saved as {filename}")

# Example usage
interpolated_points = [
    (48.7967980732, 1.9869721968799998),
    (48.796790613630556, 1.9869643914491664),
    (48.79678315406112, 1.986956586018333),
    (48.796775694491664, 1.9869487805874997),
    (48.796768234922226, 1.9869409751566665),
    (48.79676077535279, 1.9869331697258334),
    (48.79675331578334, 1.986925364295),
    (48.79674585621389, 1.9869175588641665),
    (48.79673839664445, 1.986909753433333),
    (48.796730937075004, 1.9869019480025),
    (48.79672347750555, 1.9868941425716666),
    (48.79671601793612, 1.9868863371408332),
    (48.796708558366674, 1.9868785317100002),
    (48.79670109879723, 1.9868707262791667),
    (48.79669363922778, 1.9868629208483337),
    (48.79668617965833, 1.9868551154174998),
    (48.79667872008889, 1.9868473099866668),
    (48.796671260519446, 1.9868395045558338),
    (48.79666380095001, 1.986831699125),
    (48.796656341380555, 1.986823893694167),
    (48.796648881811116, 1.9868160882633334),
    (48.79664142224167, 1.9868082828325),
    (48.796633962672225, 1.986800477401667),
    (48.79662650310278, 1.9867926719708335),
    (48.79661904353334, 1.98678486654),
    (48.79661158396389, 1.9867770611091669),
    (48.79660412439444, 1.9867692556783334),
    (48.796596664825, 1.9867614502475),
    (48.79658920525556, 1.9867536448166665),
    (48.79658174568611, 1.9867458393858335),
    (48.796574286116666, 1.986738033955),
    (48.79656682654722, 1.9867302285241666),
    (48.796559366977775, 1.9867224230933336),
    (48.796551907408336, 1.9867146176625001),
    (48.79654444783889, 1.9867068122316671),
    (48.796536988269445, 1.9866990068008337),
    (48.7965295287, 1.9866912013700002)
]

create_gpx(interpolated_points, "interpolated_points.gpx")

# Shifted points to the right
shifted_points_right = [
    (48.79680080986654, 1.9869419350600899),
    (48.79679335029814, 1.9869341296336838),
    (48.79678589072969, 1.9869263242072404),
    (48.7967784311613, 1.9869185187808434),
    (48.79677097159289, 1.9869107133544284),
    (48.79676351202447, 1.986902907928001),
    (48.79675605245603, 1.9868951025015729),
    (48.79674859288763, 1.9868872970751696),
    (48.796741133319216, 1.986879491648745),
    (48.796733673750786, 1.9868716862223208),
    (48.79672621418239, 1.9868638807959207),
    (48.79671875461396, 1.9868560753694895),
    (48.79671129504555, 1.9868482699430714),
    (48.796703835477146, 1.9868404645166557),
    (48.796696375908695, 1.986832659090225),
    (48.79668891634031, 1.9868248536638218),
    (48.79668145677188, 1.9868170482373972),
    (48.79667399720346, 1.986809242810982),
    (48.79666653763504, 1.986801437384554),
    (48.796659078066625, 1.9867936319581447),
    (48.796651618498224, 1.9867858265317295),
    (48.796644158929794, 1.9867780211053014),
    (48.796636699361365, 1.9867702156788802),
    (48.79662923979298, 1.986762410252477),
    (48.796621780224534, 1.9867546048260398),
    (48.79661432065613, 1.9867467993996308),
    (48.79660686108772, 1.9867389939732185),
    (48.7965994015193, 1.9867311885467935),
    (48.79659194195088, 1.9867233831203748),
    (48.79658448238246, 1.9867155776939536),
    (48.79657702281404, 1.986707772267538),
    (48.79656956324562, 1.9866999668411132),
    (48.796562103677225, 1.9866921614147102),
    (48.79655464410881, 1.9866843559882854),
    (48.79654718454039, 1.986676550561861),
    (48.79653972497196, 1.9866687451354454),
]

# Shifted points to the left
shifted_points_left = [
    (48.79678041739022, 1.986986847829114),
    (48.796772957819734, 1.9869790423938536),
    (48.79676549824927, 1.9869712369586299),
    (48.796758038678796, 1.9869634315233606),
    (48.79675057910833, 1.9869556260881098),
    (48.79674311953786, 1.9869478206528706),
    (48.79673565996739, 1.9869400152176313),
    (48.79672820039691, 1.9869322097823676),
    (48.796720740826444, 1.9869244043471264),
    (48.79671328125597, 1.986916598911884),
    (48.796705821685485, 1.9869087934766172),
    (48.79669836211502, 1.986900988041382),
    (48.79669090254455, 1.9868931826061333),
    (48.79668344297408, 1.9868853771708825),
    (48.7966759834036, 1.9868775717356457),
    (48.796668523833134, 1.9868697663003834),
    (48.79666106426265, 1.9868619608651417),
    (48.79665360469219, 1.9868541554298886),
    (48.79664614512171, 1.986846349994651),
    (48.79663868555124, 1.986838544559393),
    (48.79663122598077, 1.9868307391241418),
    (48.7966237664103, 1.9868229336889036),
    (48.796616306839816, 1.986815128253658),
    (48.79660884726935, 1.9868073228183945),
    (48.79660138769889, 1.9867995173831654),
    (48.7965939281284, 1.9867917119479075),
    (48.79658646855792, 1.9867839065126531),
    (48.796579008987464, 1.986776101077411),
    (48.79657154941699, 1.9867682956421637),
    (48.79656408984652, 1.986760490206918),
    (48.796556630276044, 1.9867526847716668),
    (48.796549170705575, 1.9867448793364255),
    (48.79654171113509, 1.9867370739011616),
    (48.79653425156463, 1.9867292684659204),
    (48.796526791994154, 1.9867214630306778),
    (48.796519332423685, 1.986713657595426),
]

# Create GPX files for the shifted points
create_gpx(shifted_points_right, "shifted_points_right.gpx")
create_gpx(shifted_points_left, "shifted_points_left.gpx")